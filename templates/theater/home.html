{% extends "base.html" %}
{% load static %}
{% block title %}
Wildfire Stageworks
{% endblock title %}

{% block content %}

<!-- Hero Section -->
<section id="home" class="hero">
  <div class="text-center">
    <h1 class="display-4">Welcome to our theatre!</h1>
    <p class="lead">This is where emotions, art and inspiration live.</p>
  </div>
</section>

<!-- About us -->
<section id="about" class="py-5">
  <div class="container">
    <h2 class="section-title">About our theatre</h2>
    <div class="row align-items-center">
      <div class="col-md-6">
        <p>Wildfire Stageworks was founded in 2010 by a small group of local artists passionate about making theatre
          more accessible. They began by staging intimate performances in community centers and coffee shops, quickly
          earning a reputation for their inventive sets and engaging storytelling. In 2015, the company renovated an old
          warehouse in the city’s arts district, turning it into a versatile black‐box theatre. Today, Wildfire
          Stageworks presents a season of six productions each year—ranging from contemporary dramas to beloved
          classics—while continuing to nurture emerging talent and bring new audiences into the world of live
          performance.</p>
      </div>
      <div class="col-md-6">
        <img src="{% static 'img/theater_stage.jpg' %}" class="img-fluid rounded" alt="Theater stage">
      </div>
    </div>
  </div>
</section>

<!-- Performances -->
<section id="performances" class="py-5 bg-light">
  <div class="container">
    <h2 class="section-title">Upcoming Performances</h2>
    <div class="row g-4" id="performances-cards">
      {% include "includes/performances_partial.html" %}
    </div>

    <div class="text-center mt-4">
      <button id="view-all-performances" class="btn btn-primary text-white mt-auto">
        View All <i class="fas fa-chevron-down"></i>
      </button>
      <button id="view-less-performances" class="btn btn-primary text-white mt-auto" style="display: none;">
        View Less <i class="fas fa-chevron-up"></i>
      </button>
    </div>
  </div>
</section>

<!-- Actors -->
<section id="actors" class="py-5">
  <div class="container">
    <h2 class="section-title">Our Actors</h2>
    <div class="row g-4" id="actors-cards">
      {% include "includes/actors_partial.html" %}
    </div>
    <div class="text-center mt-4">
      <button id="view-all-actors" class="btn btn-primary text-white mt-auto">
        View All <i class="fas fa-chevron-down"></i>
      </button>
      <button id="view-less-actors" class="btn btn-primary text-white mt-auto" style="display: none;">
        View Less <i class="fas fa-chevron-up"></i>
      </button>
    </div>
  </div>
</section>

{% endblock content %}

{% block js %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Performances
    const allBtn = document.getElementById('view-all-performances');
    const lessBtn = document.getElementById('view-less-performances');
    const cardsDiv = document.getElementById('performances-cards');

    if (allBtn && lessBtn && cardsDiv) {
      allBtn.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/performances/all/')
          .then(response => response.text())
          .then(html => {
            cardsDiv.innerHTML = html;
            allBtn.style.display = 'none';
            lessBtn.style.display = '';
          });
      });

      lessBtn.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/performances/top/')
          .then(response => response.text())
          .then(html => {
            cardsDiv.innerHTML = html;
            lessBtn.style.display = 'none';
            allBtn.style.display = '';
            document.getElementById('performances').scrollIntoView({ behavior: 'smooth' });
          });
      });
    }

    // Actors
    const allActorsBtn = document.getElementById('view-all-actors');
    const lessActorsBtn = document.getElementById('view-less-actors');
    const actorsDiv = document.getElementById('actors-cards');

    if (allActorsBtn && lessActorsBtn && actorsDiv) {
      allActorsBtn.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/actors/all/')
          .then(response => response.text())
          .then(html => {
            actorsDiv.innerHTML = html;
            allActorsBtn.style.display = 'none';
            lessActorsBtn.style.display = '';
          });
      });

      lessActorsBtn.addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/actors/top/')
          .then(response => response.text())
          .then(html => {
            actorsDiv.innerHTML = html;
            lessActorsBtn.style.display = 'none';
            allActorsBtn.style.display = '';
            document.getElementById('actors').scrollIntoView({ behavior: 'smooth' });
          });
      });
    }

    // ScrollSpy
    new bootstrap.ScrollSpy(document.body, {
      target: '#mainNavbar',
    });
  });
</script>

{% endblock js %}